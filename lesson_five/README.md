## 07作业

- 请搜索相关文档，实现：一个简单的声明宏
- 并理解其代码结构，和编译过程。

## 实现
- 定义了一个名为 **calculate!** 的宏
- 它接受三个输入参数：**$x**、**$operator** 和 **$y**。
- 这个宏用于实现简单的**四则运算**。

```rust
#[macro_export]
macro_rules! calculate {
    ($x:expr, $operator:tt, $y:expr) => {
        match $operator {
            "+" => $x + $y,
            "-" => $x - $y,
            "*" => $x * $y,
            "/" => $x / $y,
            _ => panic!("Unsupported operator: {}", $operator),
        }
    };
}
```

当调用这个宏时，它将按照定义的模式进行匹配和替换。具体展开的代码如下：
```rust
match "+" {
    "+" => 10 + 5,
    "-" => 10 - 5,
    "*" => 10 * 5,
    "/" => 10 / 5,
    _ => panic!("Unsupported operator: {}", "+"),
}
```
- 在这个展开的代码中，$x 的值被替换为 10，$operator 的值被替换为 +，$y 的值被替换为 5。 
- 根据宏展开后的代码，根据传入的运算符进行相应的数学计算，并返回计算结果。
- calculate!(10, "+", 5) 的展开结果是 10 + 5，计算结果为 15。
- calculate!(10, "*", 5) 的展开结果是 10 * 5，计算结果为 50。
- 宏展开的过程是在编译时完成的，展开后的代码与手动编写的代码等效。宏的目的是**简化重复的代码**，提高代码的可读性和可维护性。
## 运行
```shell
cd lesson_five
cargo run
```

